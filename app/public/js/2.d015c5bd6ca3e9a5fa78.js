webpackJsonp([2],{"2vIh":function(e,t){},Nbi8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={components:{GetUserData:s("s8YE").a},data:function(){return{slide:{data:[],slideUploadUrl:"",files:[],uploadData:{urlJurisdiction:window.location.hash.replace("#","")},disabled:!1},userid:0,admin:!1,adminlevel:0}},created:function(){this.userInfo=this.$store.state.userInfo,this.adminlevel=this.userInfo?this.userInfo.level:0,this.userInfo&&1===this.userInfo.level&&(this.admin=!0)},methods:{getSetUser:function(e){this.userid=e.id},slideChange:function(e){var t=this;if("image/png"!==e.raw.type&&"image/jpeg"!==e.raw.type&&"image/gif"!==e.raw.type)return this.$refs.slide.clearFiles(),t.alerter("请选择png/jpg/gif格式图片上传！"),!1;if(e.name&&e.size/1024/1024>.5)return this.$refs.slide.clearFiles(),t.alerter("上传文件不能大于500K！"),!1;var s=new FileReader;s.readAsDataURL(e.raw),s.onload=function(){t.slide.data.push({name:e.name,file:e.raw,url:s.result})}},slideRemove:function(e){var t;this.$refs.slide.fileList.filter(function(s,i){if(s.uid==e.uid)return t=i,!0});this.$refs.slide.fileList.splice(t,1),this.slide.data=this.$refs.slide.fileList},saveSlide:function(){var e=this;if(this.$refs.slide.fileList.length<=0)return e.alerter("请选择文件再点击上传！"),!1;var t,s=new FormData;this.$refs.slide.fileList.map(function(e,t){s.append("file"+t,e.file)}),t=e.api.libsimg+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.userid+"&adminlevel="+this.adminlevel,e.$post({url:t,data:{formData_:s,headers:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}},config:{},success:function(t){200==t.data.code?(e.$router.push({name:"imglibslist"}),e.alertsu(t.data.msg)):e.alerter(t.data.msg)},errror:function(){}})}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"xzxc-menu"},[s("br"),e._v(" "),e.admin?s("el-form",{attrs:{"label-position":this.$store.state.panelLayout,"label-width":"100px"}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{lg:8}},[s("el-form-item",{attrs:{label:"选择用户："}},[s("get-user-data",{attrs:{getUserIdFn:e.getSetUser}})],1)],1)],1)],1):e._e(),e._v(" "),s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[s("i",{staticClass:"el-icon-picture"}),e._v("图库上传")])]),e._v(" "),s("el-form",{attrs:{"label-position":this.$store.state.panelLayout,"label-width":"100px"}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{lg:16}},[s("el-form-item",{attrs:{label:"幻灯片："}},[s("el-upload",{ref:"slide",staticClass:"upload-demo",attrs:{drag:"",action:e.slide.slideUploadUrl,"file-list":e.slide.data,"on-change":e.slideChange,"auto-upload":!1,"with-credentials":!0,data:e.slide.uploadData,"on-remove":e.slideRemove,"list-type":"picture",disabled:!!e.slide.disabled,multiple:""}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),s("em",[e._v("点击上传")])]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{lg:16}},[s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveSlide}},[e._v("确认上传")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(i,a,!1,function(e){s("2vIh")},null,null);t.default=l.exports}});
//# sourceMappingURL=2.d015c5bd6ca3e9a5fa78.js.map