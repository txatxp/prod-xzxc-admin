webpackJsonp([5],{BWhR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),r=i.n(n),s={data:function(){return{user:null,look_jurisdiction_show:!1,add_jurisdiction_show:!1,themeNumberShow:!1,menudata:null,addmenudata:null,uploadUserMenuId:0,theme_number:0,theme_id:0,theme_userId:0,user_menu_jurisdiction_set:"",user_menu_jurisdiction:"",pager:{currentPage3:1,count:0,pageSize:10,size:0,user_name:""},menuTreeData:{name:"menu_name",href:"menu_href",icon:"menu_icon",parentId:"cid",hrefP:"menu_href"}}},created:function(){this.getUserData(),this.getMenuData()},methods:{edit_video_upload_jurisdiction:function(e,t){var i=this;this.$axios({type:"$axios",obj:{url:i.api.deletevideo_upload_jurisdiction,method:"post",success:function(e){200==e.status?(i.alertsu("视频编辑权限禁用成功！"),i.getUserData()):i.alertsu("视频编辑权限禁用失败！")},error:function(){i.alertsu("视频编辑权限禁用失败！")},data:{id:e.id,type:t},header:{"x-csrf-token":i.getCatch(i,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},userThemeEdit:function(e){this.themeNumberShow=!0,this.theme_number=e.theme_number,this.theme_id=e.id},getUserData:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.getuser,success:function(t){200==t.status?(e.user=t.data.user,e.pager.count=t.data.count):e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{size:e.pager.size,sizes:e.pager.pageSize,search:e.pager.user_name}})},themeNumberEdit:function(){var e=this;this.$axios({type:"$axios",obj:{url:e.api.modifyhhemenumber,method:"post",success:function(t){e.themeNumberShow=!1,200==t.data.code?(e.getUserData(),e.alertsu("编用户主题数量修改成功！")):e.alerter("编用户主题数量修改失败！")},error:function(){e.alerter("编用户主题数量修改失败！")},data:{theme_number:e.theme_number,id:e.theme_id},header:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},handleClick:function(){},isDeleteFn:function(e){return 1==e.isDelete?"正常":"已禁用"},handleSizeChange:function(e){this.pager.pageSize=e,this.getUserData()},handleCurrentChange:function(e){this.pager.size=e-1,this.getUserData()},query:function(){this.pager.size=0,this.pager.pageSize=10,this.pager.count=0,this.getUserData()},look_jurisdiction:function(e){this.menudata=JSON.parse(e.user_menu_jurisdiction),this.look_jurisdiction_show=!0},add_jurisdiction:function(e){var t=this;t.uploadUserMenuId=e.id,t.add_jurisdiction_show=!0,t.user_menu_jurisdiction_set=e.user_menu_jurisdiction_set,t.user_menu_jurisdiction=e.user_menu_jurisdiction,setTimeout(function(){var i=JSON.parse(e.user_menu_jurisdiction_set);t.$refs.setmenu.setCheckedNodes(i)},200)},getMenuData:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.getmenu,success:function(t){if(200==t.status){e.alertsu("获取菜单数据成功！","获取菜单数据",2e3);var i=e.tree1(t.data,e.menuTreeData),n=e.data2treeDG(i[0],i[1],e.menuTreeData);e.addmenudata=n}else e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{id:1}})},uploadUserMenu:function(){var e=this;this.$axios({type:"$axios",obj:{url:e.api.uploadUserMenu,method:"post",success:function(t){e.add_jurisdiction_show=!1,200==t.status?(e.getUserData(),e.alertsu("编辑权限成功！"),e.alert({content:"编辑权限成功！",title:"提示"}),e.getMenuData()):e.alertsu("编辑权限失败！")},error:function(){e.alertsu("编辑权限失败！")},data:{id:e.uploadUserMenuId,user_menu_jurisdiction:e.user_menu_jurisdiction,user_menu_jurisdiction_set:e.user_menu_jurisdiction_set},header:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},getJurisdiction:function(){var e=this.$refs.setmenu.getAllCheckedNodes(),t=this.$refs.setmenu.getCheckedNodes();e.forEach(function(e){delete e.children});var i=this.tree1(e),n=this.data2treeDG(i[0],i[1]);this.user_menu_jurisdiction=r()(n),this.user_menu_jurisdiction_set=r()(t)},deleteUser:function(e,t){var i=this;this.$axios({type:"$axios",obj:{url:i.api.deleteuser,method:"post",success:function(e){200==e.status?(i.alertsu("用户禁用成功！"),i.getUserData()):i.alertsu("用户禁用失败！")},error:function(){i.alertsu("用户禁用失败！")},data:{id:e.id,type:t},header:{"x-csrf-token":i.getCatch(i,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user"},[i("br"),e._v(" "),i("el-form",{ref:"form",attrs:{"label-width":"120px"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{sm:8}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输用户名搜索"},model:{value:e.pager.user_name,callback:function(t){e.$set(e.pager,"user_name",t)},expression:"pager.user_name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.query},slot:"append"})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}})],1)],1),e._v(" "),i("br"),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.user,border:"",height:"500"}},[i("el-table-column",{attrs:{fixed:"",prop:"user_name",label:"用户名",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"isDelete",label:"是否禁用",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isDelete?i("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("正常")]):i("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("已禁用")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"level",label:"级别",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.level?i("el-tag",{attrs:{size:"mini"}},[e._v("超级管理员")]):2==t.row.level?i("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("亚普通管理员")]):3==t.row.level?i("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("季普通管理员")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"video_upload_jurisdiction",label:"视频上传权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.video_upload_jurisdiction?i("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("有权限")]):i("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("无权限")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"视频上传权限控制",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.video_upload_jurisdiction?i("el-button-group",[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){e.edit_video_upload_jurisdiction(t.row,"delete")}}},[e._v("去除视频上传权限")])],1):0==t.row.video_upload_jurisdiction?i("el-button-group",[i("el-button",{attrs:{type:"success",icon:"el-icon-mobile-phone",size:"mini"},on:{click:function(i){e.edit_video_upload_jurisdiction(t.row,"show")}}},[e._v("启动视频上传权限")])],1):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"author",label:"创建作者",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"time",label:"用户创建时间",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ip",label:"创建作者地ip",width:"110"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ua",label:"创建作者地ua",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Jurisdiction",label:"权限",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.user_menu_jurisdiction||"[]"==JSON.stringify(t.row.user_menu_jurisdiction)?i("el-button",{attrs:{type:"text"},on:{click:function(i){e.look_jurisdiction(t.row)}}},[e._v("查看权限")]):i("el-button",{attrs:{type:"text",disabled:""}},[e._v("无任何权限")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:function(i){e.add_jurisdiction(t.row)}}},[e._v("更新权限")]),e._v(" "),1==t.row.isDelete?i("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){e.deleteUser(t.row,"delete")}}},[e._v("禁用")]):i("el-button",{attrs:{type:"success",icon:"el-icon-printer",size:"mini"},on:{click:function(i){e.deleteUser(t.row,"show")}}},[e._v("启用")])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"主题创建数量控制",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button-group",[i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"},on:{click:function(i){e.userThemeEdit(t.row)}}},[e._v("修改")])],1)]}}])})],1),e._v(" "),i("div",{staticClass:"paging-box"},[i("el-pagination",{attrs:{"current-page":e.pager.currentPage3,"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"currentPage3",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{title:"权限",visible:e.look_jurisdiction_show,width:"30%"},on:{"update:visible":function(t){e.look_jurisdiction_show=t}}},[i("el-tree",{attrs:{data:e.menudata}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.look_jurisdiction_show=!1}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"更新权限",visible:e.add_jurisdiction_show,width:"30%"},on:{"update:visible":function(t){e.add_jurisdiction_show=t}}},[i("el-tree",{ref:"setmenu",attrs:{data:e.addmenudata,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":""},on:{"check-change":e.getJurisdiction}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.uploadUserMenu}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"主题数量修改",visible:e.themeNumberShow,width:"30%"},on:{"update:visible":function(t){e.themeNumberShow=t}}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.theme_number,callback:function(t){e.theme_number=t},expression:"theme_number"}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.themeNumberShow=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.themeNumberEdit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var a=i("VU/8")(s,o,!1,function(e){i("rbkD")},null,null);t.default=a.exports},rbkD:function(e,t){}});
//# sourceMappingURL=5.cd6b1ccb06eee98ccc0f.js.map