webpackJsonp([1],{"6o/x":function(e,t){},FJJ6:function(e,t){},GtEJ:function(e,t){},kHfP:function(e,t){},yRvQ:function(e,t){},zeLf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("s8YE"),r={props:["closeCommonImg","getImg","setImg"],components:{GetUserData:a.a},data:function(){return{checkList:[],dialogVisible:!0,userid:0,userInfo:null,adminlevel:0,admin:!1,imgLibsTableData:null,imgpath:this.$store.state.staticPath,pager:{currentPage3:1,count:0,pageSize:30,size:0,user_name:""}}},created:function(){this.checkList=this.setImg?this.setImg.img:[],this.userInfo=this.$store.state.userInfo,this.adminlevel=this.userInfo?this.userInfo.level:0,this.userInfo&&1===this.userInfo.level&&(this.admin=!0),this.getImgLibsData()},methods:{goImglibs:function(){this.$router.push({name:"imglibs"})},checkListChang:function(){this.getImg(this.checkList)},getCommonImg:function(){this.closeCommonImg()},handleSizeChange:function(e){this.pager.pageSize=e,this.getImgLibsData()},handleCurrentChange:function(e){this.pager.size=e-1,this.getImgLibsData()},getSetUser:function(e){this.userid=e.id,this.pager.size=0,this.pager.pageSize=30,this.pager.count=0,this.getImgLibsData()},deleteImg:function(e,t){var i=this;this.$axios({type:"$axios",obj:{url:i.api.deleteImgLib,method:"post",success:function(e){200==e.status?(i.alertsu("用户禁用成功！"),i.getImgLibsData()):i.alertsu("用户禁用失败！")},error:function(){i.alertsu("用户禁用失败！")},data:{id:e.id,type:t},header:{"x-csrf-token":i.getCatch(i,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},getImgLibsData:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.getlibsimg,success:function(t){200==t.data.code?(console.log(t),e.imgLibsTableData=t.data.data.imgdata,e.pager.count=t.data.data.count):e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{userid:this.userid,size:e.pager.size,sizes:e.pager.pageSize,adminlevel:this.adminlevel}})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xzxc-common-img"},[i("br"),e._v(" "),i("el-dialog",{attrs:{title:"图片选取",visible:e.dialogVisible,width:this.$store.state.modalWidth,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.admin?i("el-form",{attrs:{"label-position":this.$store.state.panelLayout,"label-width":"100px"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"选择用户："}},[i("get-user-data",{attrs:{getUserIdFn:e.getSetUser}})],1)],1)],1)],1):e._e(),e._v(" "),e.imgLibsTableData&&e.imgLibsTableData.length>0?i("el-row",{attrs:{gutter:24}},[i("el-checkbox-group",{on:{change:e.checkListChang},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.imgLibsTableData,function(t){return i("el-col",{key:t.id,attrs:{lg:3}},[i("div",{staticClass:"common-img-box"},[i("el-checkbox",{staticStyle:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","text-align":"center","line-height":"80px"},attrs:{label:t.img_path}},[e._v(" ")]),e._v(" "),i("img",{attrs:{src:e.imgpath+"/"+t.img_path}})],1)])}))],1):i("el-button",{attrs:{type:"warning"},on:{click:e.goImglibs}},[e._v("图库无图片，去图库上传图片")]),e._v(" "),i("div",{staticClass:"paging-box"},[i("el-pagination",{attrs:{"current-page":e.pager.currentPage3,"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"currentPage3",t)}}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.getCommonImg}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=i("VU/8")(r,s,!1,function(e){i("GtEJ")},null,null).exports,l={components:{CommonImg:o},props:["formtext"],data:function(){return{radio:{radioUploadUrl:"",uploadData:{urlJurisdiction:window.location.hash.replace("#","")},data:[],emotion_id:0,success:0,userid:0,routeQuery:{},adminlevel:0,userInfo:null}}},created:function(){this.radio.emotion_id=this.formtext.id,this.radio.userInfo=this.$store.state.userInfo,this.radio.adminlevel=this.radio.userInfo?this.radio.userInfo.level:0,this.radio.routeQuery=this.$route.query.emotion_id?this.$route.query:null,this.radio.radioUploadUrl=this.api.radioUpload},computed:{},mounted:function(){},methods:{saveRadio:function(){var e=this;if(this.$refs.radio.fileList.length<=0)return e.alerter("请选择文件再点击上传！"),!1;var t,i=new FormData;this.$refs.radio.fileList.map(function(e,t){i.append("file"+t,e.file)}),e.routeQuery&&e.routeQuery.emotion_id?(e.userid=e.routeQuery.userid||e.userid,t=e.api.radioUpload+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.radio.userid+"&adminlevel="+this.radio.adminlevel+"&emotion_id="+e.routeQuery.emotion_id):t=e.api.radioUpload+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.radio.userid+"&adminlevel="+this.radio.adminlevel+"&emotion_id="+e.formtext.id,e.$post({url:t,data:{formData_:i,headers:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}},config:{},success:function(t){200==t.data.code?(e.radio.success=1,e.alertsu(t.data.msg)):e.alerter(t.data.msg)},errror:function(){}})},radioChange:function(e){console.log(e);var t=this;if(t.$refs.radio.fileList.length>=1)return console.log(t.$refs.radio.fileList),t.alerter("音频每个课时只允许上传一节！"),!1;if("audio/mp3"!==e.raw.type)return t.alerter("请选择audio/mp3格式音频上传！"),!1;if(e.name&&e.size/1024/1024>5)return t.alerter("上传文件不能大于5MB！"),!1;var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(){t.radio.data.push({name:e.name,file:e.raw,url:i.result})}},radioChangeRemove:function(e){var t;this.$refs.radio.fileList.filter(function(i,a){if(i.uid==e.uid)return t=a,!0});this.$refs.radio.fileList.splice(t,1),this.radio.data=this.$refs.radio.fileList,console.log(this.$refs.radio.fileList)}},updated:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xzxc-menu",staticStyle:{overflow:"hidden"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"缩略图："}},[0==e.formtext.id?i("el-tag",{attrs:{type:"danger"}},[e._v("文本类管理还未发布，音频不允许发布！")]):i("el-tag",{attrs:{type:"success"}},[e._v("音频允许发布")])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:16}},[i("el-form-item",{attrs:{label:"音频上传："}},[i("el-upload",{ref:"radio",staticClass:"upload-demo",attrs:{drag:"",action:e.radio.radioUploadUrl,"auto-upload":!1,"with-credentials":!0,data:e.radio.uploadData,"on-change":e.radioChange,"file-list":e.radio.data,"on-remove":e.radioChangeRemove,disabled:0==e.formtext.id}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传audio/mp3文件，且不超过5MB")])])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:""}},[0==e.formtext.id&&0==e.radio.success?i("el-button",{attrs:{icon:"el-icon-service",disabled:""}},[e._v("确认上传音频")]):0!=e.formtext.id&&0==e.radio.success?i("el-button",{attrs:{type:"success",icon:"el-icon-service"},on:{click:e.saveRadio}},[e._v("确认上传音频")]):0!=e.formtext.id&&1==e.radio.success?i("el-button",{attrs:{type:"success",icon:"el-icon-service",disabled:""}},[e._v("音频已保存成功")]):e._e(),e._v(" "),0!=e.formtext.id&&1==e.radio.success?i("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"30px","vertical-align":"middle"}}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(l,n,!1,function(e){i("FJJ6")},null,null).exports,d={components:{CommonImg:o},props:["formtext"],data:function(){return{radio:{radioUploadUrl:"",uploadData:{urlJurisdiction:window.location.hash.replace("#","")},data:[],emotion_id:0,success:0,userid:0,routeQuery:{},adminlevel:0,userInfo:null}}},created:function(){this.radio.emotion_id=this.formtext.id,this.radio.userInfo=this.$store.state.userInfo,this.radio.adminlevel=this.radio.userInfo?this.radio.userInfo.level:0,this.radio.routeQuery=this.$route.query.emotion_id?this.$route.query:null,this.radio.radioUploadUrl=this.api.radioUpload},computed:{},mounted:function(){},methods:{saveRadio:function(){var e=this;if(this.$refs.radio.fileList.length<=0)return e.alerter("请选择文件再点击上传！"),!1;var t,i=new FormData;this.$refs.radio.fileList.map(function(e,t){i.append("file"+t,e.file)}),e.routeQuery&&e.routeQuery.emotion_id?(e.userid=e.routeQuery.userid||e.userid,t=e.api.videoUpload+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.radio.userid+"&adminlevel="+this.radio.adminlevel+"&emotion_id="+e.routeQuery.emotion_id):t=e.api.videoUpload+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.radio.userid+"&adminlevel="+this.radio.adminlevel+"&emotion_id="+e.formtext.id,e.$post({url:t,data:{formData_:i,headers:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}},config:{},success:function(t){200==t.data.code?(e.radio.success=1,e.alertsu(t.data.msg)):e.alerter(t.data.msg)},errror:function(){}})},radioChange:function(e){console.log(e);var t=this;if(t.$refs.radio.fileList.length>=1)return console.log(t.$refs.radio.fileList),t.alerter("视频每个课时只允许上传一节！"),!1;if("video/mp4"!==e.raw.type)return t.alerter("请选择video/mp4格式音频上传！"),!1;if(e.name&&e.size/1024/1024>100)return t.alerter("上传文件不能大于100MB！"),!1;var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(){t.radio.data.push({name:e.name,file:e.raw,url:i.result})}},radioChangeRemove:function(e){var t;this.$refs.radio.fileList.filter(function(i,a){if(i.uid==e.uid)return t=a,!0});this.$refs.radio.fileList.splice(t,1),this.radio.data=this.$refs.radio.fileList,console.log(this.$refs.radio.fileList)}},updated:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xzxc-menu",staticStyle:{overflow:"hidden"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"缩略图："}},[0==e.formtext.id?i("el-tag",{attrs:{type:"danger"}},[e._v("文本类管理还未发布，视频不允许发布！")]):i("el-tag",{attrs:{type:"success"}},[e._v("视频允许发布")])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:16}},[i("el-form-item",{attrs:{label:"视频上传："}},[i("el-upload",{ref:"radio",staticClass:"upload-demo",attrs:{drag:"",action:e.radio.radioUploadUrl,"auto-upload":!1,"with-credentials":!0,data:e.radio.uploadData,"on-change":e.radioChange,"file-list":e.radio.data,"on-remove":e.radioChangeRemove,disabled:0==e.formtext.id}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传video/mp4文件，且不超过100MB")])])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:""}},[0==e.formtext.id&&0==e.radio.success?i("el-button",{attrs:{icon:"el-icon-mobile-phone",disabled:""}},[e._v("确认上传视频")]):0!=e.formtext.id&&0==e.radio.success?i("el-button",{attrs:{type:"success",icon:"el-icon-mobile-phone"},on:{click:e.saveRadio}},[e._v("确认上传音频")]):0!=e.formtext.id&&1==e.radio.success?i("el-button",{attrs:{type:"success",icon:"el-icon-mobile-phone",disabled:""}},[e._v("视频已保存成功")]):e._e(),e._v(" "),0!=e.formtext.id&&1==e.radio.success?i("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"30px","vertical-align":"middle"}}):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(d,u,!1,function(e){i("yRvQ")},null,null).exports,f={components:{CommonImg:o},props:["formtext"],data:function(){return{commonimgshow:!1,imgpath:this.$store.state.staticPath,selectShow:!1,img:{slideUploadUrl:"",data:[],uploadData:{urlJurisdiction:window.location.hash.replace("#","")},pictureText:[],emotion_id:0},item:null}},created:function(){console.log(this.$refs.quillEditor,"**"),this.img.emotion_id=this.formtext.id},computed:{},mounted:function(){},methods:{closeCard:function(e){this.img.pictureText.splice(e,1)},submitTextPicture:function(){var e=this;return e.img.pictureText.length<=0?e.alerter("请添加图文！"):e.img.pictureText.filter(function(e,t){return""!=e.title&&(""!=e.desc&&!(e.img.length<=0))}).length!=e.img.pictureText.length?e.alerter("还有图文模块没有填写完整！"):(e.img.emotion_id=this.formtext.id,void e.$axios({type:"$axios",obj:{url:e.api.uploadImgText,method:"post",success:function(t){200==t.data.code?e.alertsu(t.data.msg):e.alerter(t.data.msg)},error:function(){e.alertsu("情感数据保存失败！")},data:e.img,header:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}}}))},getImgFn:function(e){this.item.img=e},addtext:function(){this.img.pictureText.push({title:"",desc:"",img:[]})},closeCommonImgFn:function(){this.commonimgshow=!1},selectImg:function(e){this.commonimgshow=!0,this.item=e},addSetImg:function(){},getImg:function(e,t){this.item.img.push({index:t,path:e.url}),console.log(this.img.pictureText)}},updated:function(){},destroyed:function(){},deactivated:function(){},activated:function(){}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xzxc-menu",staticStyle:{overflow:"hidden"}},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-date"}),e._v(" 图文编辑")]),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"缩略图："}},[0==e.formtext.id?i("el-tag",{attrs:{type:"danger"}},[e._v("文本类管理还未发布，图文不允许编辑！")]):i("el-tag",{attrs:{type:"success"}},[e._v("图文允许编辑")])],1)],1)],1),e._v(" "),e._l(e.img.pictureText,function(t,a){return i("el-card",{key:a,staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("输入标题和内容")]),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",round:"",type:"danger"},on:{click:function(t){e.closeCard(a)}}},[e._v("关闭")])],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:24}},[i("el-form-item",[i("el-button",{attrs:{size:"mini",icon:"el-icon-search",round:""},on:{click:function(i){e.selectImg(t)}}},[e._v("选取图片")]),e._v(" "),e._l(t.img,function(a){return t.img.length>0?i("img",{staticStyle:{width:"30px",height:"30px","border-radius":"15px","margin-left":"10px","vertical-align":"middle"},attrs:{src:e.imgpath+"/"+a}}):e._e()})],2),e._v(" "),i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{placeholder:"输入标题"},model:{value:t.title,callback:function(i){e.$set(t,"title",i)},expression:"item.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"内容"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.desc,callback:function(i){e.$set(t,"desc",i)},expression:"item.desc"}})],1)],1)],1)],1)}),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:24}},[i("el-form-item",{attrs:{label:"文本添加："}},[0==e.formtext.id?i("el-button",{staticStyle:{"font-size":"20px"},attrs:{icon:"el-icon-plus",circle:"",disabled:""}}):i("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addtext}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:24}},[i("el-form-item",{attrs:{label:""}},[0==e.formtext.id&&e.img.pictureText.length<=0?i("el-button",{staticStyle:{"font-size":"20px"},attrs:{icon:"el-icon-plus",disabled:""}},[e._v("提交保存")]):e.formtext.id>0&&e.img.pictureText.length>0?i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.submitTextPicture}},[e._v("提交保存")]):e._e()],1)],1)],1)],2)],1),e._v(" "),i("el-dialog",{attrs:{title:"选取图片",visible:e.selectShow,width:this.$store.state.modalWidth},on:{"update:visible":function(t){e.selectShow=t}}},[e._l(e.img.data,function(t,a){return e.img.data.length>0?i("img",{staticStyle:{height:"80px","margin-right":"10px","margin-bottom":"10px","border-radius":"3px",cursor:"pointer"},attrs:{src:t.url},on:{click:function(i){e.getImg(t,a)}}}):i("el-alert",{attrs:{title:"请上传图片！",type:"error"}})}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.selectShow=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addSetImg}},[e._v("确 定")])],1)],2),e._v(" "),e.commonimgshow?i("common-img",{attrs:{closeCommonImg:e.closeCommonImgFn,getImg:e.getImgFn,setImg:e.item}}):e._e()],1)},staticRenderFns:[]};var g=i("VU/8")(f,p,!1,function(e){i("kHfP")},null,null).exports,h={components:{GetUserData:a.a,TextImg:g,RadioUpload:c,VideoUpload:m},data:function(){return{fileList:[],checked:"1",num1:1,classData:null,formtextRules:{title:{required:!0,message:"请输入课程标题"},class:{required:!0,message:"请选择主题分类"},desc:{required:!0,message:"请输入描述"},name:{required:!0,message:"请输入名称"},price:[{required:!0,message:"请输入现价"}],orderNumber:{required:!0,message:"请输入订购数量"},originalPrice:[{required:!0,message:"请输入原价"}],readNumber:{required:!0,message:"请输入阅读数量"}},formmedia:{imgtextArr:[],title:"",name:"",theme:"",class:"",desc:"",minimg:"",price:0,OriginalPrice:0,uploadFileUrl:"",ReadNumber:0,files:null,checkListCheckbox:["推荐"],checkListCheckboxArr:["推荐","置顶","经典"],themeData:[]},formtext:{title:"",name:"",class:"",desc:"",readNumber:"",originalPrice:"",orderNumber:"",price:"",checkListCheckbox:[],checkListCheckboxArr:["推荐","置顶","经典"],themeData:[],adminlevel:0,userid:0,user:null,id:0,edit:!1},slide:{data:[],slideUploadUrl:"",files:[],uploadData:{urlJurisdiction:window.location.hash.replace("#","")},success:0},abbreviationsImg:{emotionUploadMinImgUrl:"",data:[],files:[],uploadData:{urlJurisdiction:window.location.hash.replace("#","")},success:0},minimgBase64:null,formPlaceholder:{title:"请输入标题",name:"请输入作者",theme:"请输入主题",class:"请选择分类",desc:"请输入描述",minimg:"选择缩略图"},admin:!1,edit:!0,userid:0,adminlevel:0,routeQuery:null}},beforeRouteUpdate:function(e,t,i){i(),location.reload()},created:function(){this.formtext.uploadFileUrl=this.api.emotioinminimg,this.slide.slideUploadUrl=this.api.slideUploadUrl;this.userInfo=this.$store.state.userInfo,this.adminlevel=this.formtext.adminlevel=this.userInfo?this.userInfo.level:0,this.userInfo&&1===this.userInfo.level&&(this.admin=!0),this.routeQuery=this.$route.query.emotion_id?this.$route.query:null,this.routeQuery&&this.routeQuery.emotion_id&&(this.formtext.id=this.routeQuery.emotion_id,this.edit=!1,this.formtext.edit=!0,this.userid=this.formtext.userid=this.routeQuery.user_id,this.getEmotionData()),this.gettheme()},methods:{classChange:function(e){console.log(this.formtext.class)},beforeEditSlide:function(e){},getEmotionData:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.getEmotionData,success:function(t){if(200==t.data.code){var i=t.data.data[0];e.formtext.title=i.title,e.formtext.name=i.author_name,e.formtext.class=i.theme_id,e.formtext.desc=i.emotion_describe,e.formtext.readNumber=i.readNumber,e.formtext.originalPrice=i.originalPrice,e.formtext.orderNumber=i.orderNumber,e.formtext.price=i.price,e.formtext.checkListCheckbox=i.attribute.split(","),e.alertsu("获取菜单数据成功！","获取菜单数据",2e3)}else e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{emotion_id:e.formtext.id,adminlevel:this.adminlevel}})},saveSlide:function(){var e=this;if(this.$refs.slide.fileList.length<=0)return e.alerter("请选择文件再点击上传！"),!1;var t,i=new FormData;if(this.$refs.slide.fileList.map(function(e,t){i.append("file"+t,e.file)}),e.routeQuery&&e.routeQuery.emotion_id)e.userid=e.routeQuery.userid||e.userid,t=e.api.slideUploadUrl+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.userid+"&adminlevel="+this.adminlevel+"&emotion_id="+e.routeQuery.emotion_id;else{if(0==e.formtext.id)return e.alerter("请先发布完文本类管理再发布幻灯片！"),!1;t=e.api.slideUploadUrl+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.userid+"&adminlevel="+this.adminlevel+"&emotion_id="+e.formtext.id}e.$post({url:t,data:{formData_:i,headers:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}},config:{},success:function(t){200==t.data.code?(e.slide.success=1,e.alertsu(t.data.msg)):e.alerter(t.data.msg)},errror:function(){}})},slideChange:function(e){var t=this;if("image/png"!==e.raw.type&&"image/jpeg"!==e.raw.type&&"image/gif"!==e.raw.type)return this.$refs.slide.clearFiles(),t.alerter("请选择png/jpg/gif格式图片上传！"),!1;if(e.name&&e.size/1024/1024>.5)return this.$refs.slide.clearFiles(),t.alerter("上传文件不能大于500K！"),!1;var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(){t.slide.data.push({name:e.name,file:e.raw,url:i.result})}},slideRemove:function(e){var t;this.$refs.slide.fileList.filter(function(i,a){if(i.uid==e.uid)return t=a,!0});this.$refs.slide.fileList.splice(t,1),this.slide.data=this.$refs.slide.fileList},abbreviationsImgFn:function(){var e=this;if(console.log(this.$refs.abbreviations.fileList),this.$refs.abbreviations.fileList.length<=0)return e.alerter("请选择文件再点击上传！"),!1;var t,i=new FormData;if(i.append("file",this.$refs.abbreviations.fileList[0].file),e.routeQuery&&e.routeQuery.emotion_id)e.userid=e.routeQuery.userid||e.userid,t=e.api.emotionUploadMinImg+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.userid+"&adminlevel="+this.adminlevel+"&emotion_id="+e.routeQuery.emotion_id;else{if(0==e.formtext.id)return e.alerter("请先发布完文本类管理再发布幻灯片！"),!1;t=e.api.emotionUploadMinImg+"?urlJurisdiction="+window.location.hash.replace("#","").split("?")[0]+"&userid="+this.userid+"&adminlevel="+this.adminlevel+"&emotion_id="+e.formtext.id}e.$post({url:t,data:{formData_:i,headers:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}},config:{},success:function(t){200==t.data.code?(e.abbreviationsImg.success=1,e.alertsu(t.data.msg)):e.alerter(t.data.msg)},errror:function(){}}),console.log(t)},abbreviationsImgRemove:function(e){var t;this.$refs.abbreviations.fileList.filter(function(i,a){if(i.uid==e.uid)return t=a,!0});this.$refs.abbreviations.fileList.splice(t,1),this.abbreviationsImg.data=this.$refs.abbreviations.fileList},abbreviationsImgChange:function(e){var t=this;if("image/png"!==e.raw.type&&"image/jpeg"!==e.raw.type&&"image/gif"!==e.raw.type)return this.$refs.abbreviations.clearFiles(),t.alerter("请选择png/jpg/gif格式图片上传！"),!1;if(e.name&&e.size/1024/1024>.1)return this.$refs.abbreviations.clearFiles(),t.alerter("上传文件不能大于500K！"),!1;var i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(){t.abbreviationsImg.data.push({name:e.name,file:e.raw,url:i.result})}},textFormSave:function(){var e=this;e.$axios({type:"$axios",obj:{url:e.api.addemotiontext,method:"post",success:function(t){200==t.data.code?(console.log(t,"*******",e.routeQuery),e.routeQuery||(e.formtext.id=t.data.data.id,e.formtext.edit=!0),e.alertsu(t.data.msg)):e.alerter(t.data.msg)},error:function(){e.alertsu("情感数据保存失败！")},data:e.formtext,header:{"x-csrf-token":e.getCatch(e,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},textFormValidata:function(){var e=this;if(e.formtext.themeData.length<=0)return e.$message.error({message:"当前用户没有创建主题，不能发布课程！",duration:6e3}),e.alerter("当前用户没有创建主题，不能发布情感数据！","",6e3),!1;e.$refs.formtext.validate(function(t){if(!t)return!1;e.textFormSave()})},getSetUser:function(e){this.$refs.formtext.resetFields(),this.formtext.id=0,this.slide.success=0,this.abbreviationsImg.success=0,this.user=this.formtext.user=[e],this.userid=this.formtext.userid=e.id,this.$refs.radioid.radio.success=0,this.$refs.videoid.radio.success=0,this.gettheme()},gettheme:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.gettheme,success:function(t){200==t.data.code?(e.formtext.themeData=t.data.data,e.formtext.themeData.length<=0&&e.$message.error({message:"当前用户没有创建主题，不能发布课程！",duration:6e3}),e.alertsu("获取菜单数据成功！","获取菜单数据",2e3)):e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{userid:this.userid,adminlevel:this.adminlevel}})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleRemove2:function(e,t){console.log(e,t)},handlePreview2:function(e){console.log(e)},submitUpload:function(){},minimgChange:function(e,t){var i=this;if(i.form.minimg=e.name,i.form.files=e.raw,"image/png"!==e.raw.type&&"image/jpeg"!==e.raw.type&&"image/gif"!==e.raw.type)return i.form.minimg="",i.minimgBase64=null,i.$refs.uploademotioin.abort(),i.$refs.uploademotioin.clearFiles(),i.alerter("请选择png/jpg/gif格式图片上传！"),!1;if(e.name)if(e.size/1024/1024>.1)i.form.minimg="",i.minimgBase64=null,i.$refs.uploademotioin.abort(),i.$refs.uploademotioin.clearFiles(),i.alerter("上传文件不能大于100K！");else{var a=new FileReader;a.readAsDataURL(i.form.files),a.onload=function(){i.minimgBase64=this.result}}}}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"xzxc-menu"},[i("br"),e._v(" "),e.admin&&e.edit?i("el-form",{attrs:{"label-position":this.$store.state.panelLayout,"label-width":"100px"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"选择用户："}},[i("get-user-data",{attrs:{getUserIdFn:e.getSetUser}})],1)],1)],1)],1):e._e(),e._v(" "),i("el-form",{ref:"formtext",attrs:{model:e.formtext,"label-position":this.$store.state.panelLayout,rules:e.formtextRules,"label-width":"100px"}},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",{attrs:{label:"文本类管理"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-date"}),e._v(" 文本类管理")]),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"课程标题：",prop:"title"}},[i("el-input",{attrs:{placeholder:e.formPlaceholder.title},model:{value:e.formtext.title,callback:function(t){e.$set(e.formtext,"title",t)},expression:"formtext.title"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"选择分类：",prop:"class"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.formPlaceholder.class},on:{change:e.classChange},model:{value:e.formtext.class,callback:function(t){e.$set(e.formtext,"class",t)},expression:"formtext.class"}},e._l(e.formtext.themeData,function(t){return i("el-option",{key:t.id,attrs:{label:t.theme_name,value:t.id}},[e._v(e._s(t.theme_name))])}))],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:16}},[i("el-form-item",{attrs:{label:"简单描述：",prop:"desc"}},[i("el-input",{attrs:{rows:3,type:"textarea",placeholder:"输入描述"},model:{value:e.formtext.desc,callback:function(t){e.$set(e.formtext,"desc",t)},expression:"formtext.desc"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"作者：",prop:"name"}},[i("el-input",{attrs:{placeholder:"输入发布人昵称"},model:{value:e.formtext.name,callback:function(t){e.$set(e.formtext,"name",t)},expression:"formtext.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"现价：",prop:"price"}},[i("el-input",{attrs:{placeholder:"输入现在价格",type:"number"},model:{value:e.formtext.price,callback:function(t){e.$set(e.formtext,"price",t)},expression:"formtext.price"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"订购量：",prop:"orderNumber"}},[i("el-input",{attrs:{placeholder:"输入订购数量",type:"number"},model:{value:e.formtext.orderNumber,callback:function(t){e.$set(e.formtext,"orderNumber",t)},expression:"formtext.orderNumber"}})],1)],1),e._v(" "),i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"原价：",prop:"originalPrice"}},[i("el-input",{attrs:{placeholder:"输入原先价格",type:"number"},model:{value:e.formtext.originalPrice,callback:function(t){e.$set(e.formtext,"originalPrice",t)},expression:"formtext.originalPrice"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"阅读量：",prop:"readNumber"}},[i("el-input",{attrs:{placeholder:"阅读量",type:"number"},model:{value:e.formtext.readNumber,callback:function(t){e.$set(e.formtext,"readNumber",t)},expression:"formtext.readNumber"}})],1)],1)],1),e._v(" "),e.admin?i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:16}},[i("el-form-item",{attrs:{label:"属性："}},[i("el-checkbox-group",{model:{value:e.formtext.checkListCheckbox,callback:function(t){e.$set(e.formtext,"checkListCheckbox",t)},expression:"formtext.checkListCheckbox"}},e._l(e.formtext.checkListCheckboxArr,function(t){return i("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)],1)],1):e._e(),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:e.textFormValidata}},[e._v("提交保存")])],1)],1)],1)],1)],1)],1),e._v(" "),i("br"),e._v(" "),i("el-form",{attrs:{"label-position":this.$store.state.panelLayout,model:e.formmedia,"label-width":"160px"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:24}},[i("el-tabs",{attrs:{type:"border-card"}},[i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-picture"}),e._v(" 媒体上传类编辑")]),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"幻灯片发布状态："}},[0==e.formtext.id?i("el-tag",{attrs:{type:"danger"}},[e._v("文本类管理还未发布，幻灯片不允许发布！")]):i("el-tag",{attrs:{type:"success"}},[e._v("幻灯片允许发布")])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:16}},[i("el-form-item",{attrs:{label:"幻灯片："}},[i("el-upload",{ref:"slide",staticClass:"upload-demo",attrs:{drag:"",action:e.slide.slideUploadUrl,"file-list":e.slide.data,"on-change":e.slideChange,"auto-upload":!1,"with-credentials":!0,data:e.slide.uploadData,"on-remove":e.slideRemove,"before-upload":e.beforeEditSlide,"list-type":"picture",disabled:0==e.formtext.id,multiple:""}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:""}},[0==e.formtext.id&&0==e.slide.success?i("el-button",{attrs:{icon:"el-icon-picture-outline",disabled:""}},[e._v("保存幻灯片")]):0!=e.formtext.id&&0==e.slide.success?i("el-button",{attrs:{type:"primary",icon:"el-icon-picture-outline"},on:{click:e.saveSlide}},[e._v("保存幻灯片")]):0!=e.formtext.id&&1==e.slide.success?i("el-button",{attrs:{type:"success",icon:"el-icon-check",disabled:""}},[e._v("幻灯片已保存成功！")]):e._e(),e._v(" "),0!=e.formtext.id&&1==e.slide.success?i("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"30px","vertical-align":"middle"}}):e._e()],1)],1)],1),e._v(" "),i("hr"),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"缩略图："}},[0==e.formtext.id?i("el-tag",{attrs:{type:"danger"}},[e._v("文本类管理还未发布，缩略图不允许发布！")]):i("el-tag",{attrs:{type:"success"}},[e._v("缩略图允许发布")])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:"缩略图："}},[i("el-upload",{ref:"abbreviations",staticClass:"upload-demo",attrs:{drag:"",action:e.abbreviationsImg.emotionUploadMinImgUrl,"auto-upload":!1,"with-credentials":!0,data:e.abbreviationsImg.uploadData,"list-type":"picture","on-change":e.abbreviationsImgChange,"file-list":e.abbreviationsImg.data,"on-remove":e.abbreviationsImgRemove,disabled:0==e.formtext.id}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过100kb")])])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{lg:8}},[i("el-form-item",{attrs:{label:""}},[0==e.formtext.id&&0==e.abbreviationsImg.success?i("el-button",{attrs:{icon:"el-icon-picture",disabled:""}},[e._v("保存缩略图")]):0!=e.formtext.id&&0==e.abbreviationsImg.success?i("el-button",{attrs:{type:"primary",icon:"el-icon-picture"},on:{click:e.abbreviationsImgFn}},[e._v("保存缩略图")]):0!=e.formtext.id&&1==e.abbreviationsImg.success?i("el-button",{attrs:{type:"success",icon:"el-icon-check",disabled:""}},[e._v("缩略图已保存成功")]):e._e(),e._v(" "),0!=e.formtext.id&&1==e.abbreviationsImg.success?i("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"30px","vertical-align":"middle"}}):e._e()],1)],1)],1),e._v(" "),i("hr"),e._v(" "),i("text-img",{attrs:{formtext:e.formtext}}),e._v(" "),i("hr"),e._v(" "),i("radio-upload",{ref:"radioid",attrs:{formtext:e.formtext}}),e._v(" "),i("hr"),e._v(" "),e.admin?i("video-upload",{ref:"videoid",attrs:{formtext:e.formtext}}):e._e()],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=i("VU/8")(h,v,!1,function(e){i("6o/x")},null,null);t.default=b.exports}});
//# sourceMappingURL=1.242f87d6f64541b7dcb1.js.map