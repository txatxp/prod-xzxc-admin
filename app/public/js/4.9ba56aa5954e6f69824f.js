webpackJsonp([4],{FLy3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{GetUserData:a("s8YE").a},data:function(){return{userid:0,userInfo:null,adminlevel:0,admin:!1,imgLibsTableData:null,imgpath:this.$store.state.staticPath,pager:{currentPage3:1,count:0,pageSize:10,size:0,user_name:""}}},created:function(){this.userInfo=this.$store.state.userInfo,this.adminlevel=this.userInfo?this.userInfo.level:0,this.userInfo&&1===this.userInfo.level&&(this.admin=!0),this.getImgLibsData()},methods:{handleSizeChange:function(e){this.pager.pageSize=e,this.getImgLibsData()},handleCurrentChange:function(e){this.pager.size=e-1,this.getImgLibsData()},getSetUser:function(e){this.userid=e.id,this.pager.size=0,this.pager.pageSize=10,this.pager.count=0,this.getImgLibsData()},deleteImg:function(e,t){var a=this;this.$axios({type:"$axios",obj:{url:a.api.deleteImgLib,method:"post",success:function(e){200==e.status?(a.alertsu("用户禁用成功！"),a.getImgLibsData()):a.alertsu("用户禁用失败！")},error:function(){a.alertsu("用户禁用失败！")},data:{id:e.id,type:t},header:{"x-csrf-token":a.getCatch(a,"csrfToken"),"content-type":"application/json; charset=utf-8"}}})},getImgLibsData:function(){var e=this;e.$get({type:"$get",obj:{url:e.api.getlibsimg,success:function(t){200==t.data.code?(console.log(t),e.imgLibsTableData=t.data.data.imgdata,e.pager.count=t.data.data.count):e.alerter("获取菜单数据失败！","获取菜单数据",2e3)},error:function(){e.alerter("获取菜单数据失败！","获取菜单数据",2e3)}},param:{userid:this.userid,size:e.pager.size,sizes:e.pager.pageSize,adminlevel:this.adminlevel}})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xzxc-menu"},[a("br"),e._v(" "),e.admin?a("el-form",{attrs:{"label-position":this.$store.state.panelLayout,"label-width":"100px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{lg:8}},[a("el-form-item",{attrs:{label:"选择用户："}},[a("get-user-data",{attrs:{getUserIdFn:e.getSetUser}})],1)],1)],1)],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.imgLibsTableData,stripe:"",border:"",height:"500"}},[a("el-table-column",{attrs:{prop:"img_path",label:"图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"130px","border-radius":"5px"},attrs:{src:e.imgpath+"/"+t.row.img_path}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"timestr",label:"添加时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isDelete",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isDelete?a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("图片已禁用")]):a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("正常")])]}}])}),e._v(" "),e.admin?a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isDelete?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-refresh"},on:{click:function(a){e.deleteImg(t.row,"show")}}},[e._v("启用")]):a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){e.deleteImg(t.row,"delete")}}},[e._v("禁用")])]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"paging-box"},[a("el-pagination",{attrs:{"current-page":e.pager.currentPage3,"page-size":e.pager.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pager.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pager,"currentPage3",t)}}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(e){a("dlMA")},null,null);t.default=r.exports},dlMA:function(e,t){}});
//# sourceMappingURL=4.9ba56aa5954e6f69824f.js.map